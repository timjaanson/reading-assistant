# API Documentation

## API Signature

### Parameters

- **model** _(LanguageModel)_: The language model to use. Example: `openai('gpt-4-turbo')`
- **system** _(string)_: The system prompt specifying the model's behavior.
- **prompt** _(string)_: The input prompt to generate text from.
- **messages** _(Array<CoreSystemMessage | CoreUserMessage | CoreAssistantMessage | CoreToolMessage> | Array<UIMessage>)_: A list of messages representing a conversation. UI messages from `useChat` are automatically converted.
- **tools** _(ToolSet)_: Tools accessible by the model for execution.

---

## Entities and Their Fields

### Messages

#### **CoreSystemMessage**

- **role**: `'system'`
- **content** _(string)_: The system message content.

#### **CoreUserMessage**

- **role**: `'user'`
- **content** _(string | Array<TextPart | ImagePart | FilePart>)_: The user's message content.

#### **CoreAssistantMessage**

- **role**: `'assistant'`
- **content** _(string | Array<TextPart | ReasoningPart | RedactedReasoningPart | ToolCallPart>)_: The assistant's response.

#### **CoreToolMessage**

- **role**: `'tool'`
- **content** _(Array<ToolResultPart>)_: The result of tool executions.

---

### Message Content Parts

#### **TextPart**

- **type**: `'text'`
- **text** _(string)_: The text content.

#### **ImagePart**

- **type**: `'image'`
- **image** _(string | Uint8Array | Buffer | ArrayBuffer | URL)_: The image content (base64, data URLs, or http(s) URLs).
- **mimeType?** _(string, optional)_: The mime type of the image.

#### **FilePart**

- **type**: `'file'`
- **data** _(string | Uint8Array | Buffer | ArrayBuffer | URL)_: The file content.
- **mimeType** _(string)_: The mime type of the file.

#### **ReasoningPart**

- **type**: `'reasoning'`
- **text** _(string)_: The reasoning text.
- **signature?** _(string, optional)_: The signature for the reasoning.

#### **RedactedReasoningPart**

- **type**: `'redacted-reasoning'`
- **data** _(string)_: The redacted data.

#### **ToolCallPart**

- **type**: `'tool-call'`
- **toolCallId** _(string)_: ID of the tool call.
- **toolName** _(string)_: The tool name (typically a function name).
- **args** _(object based on Zod schema)_: Parameters generated by the model for the tool.

#### **ToolResultPart**

- **type**: `'tool-result'`
- **toolCallId** _(string)_: ID of the tool call the result corresponds to.
- **toolName** _(string)_: Name of the tool executed.
- **result** _(unknown)_: The result of the tool execution.
- **isError?** _(boolean, optional)_: Whether the result indicates an error.

---

### Tool Handling

#### **ToolSet**

A collection of tools accessible to the model.

#### **Tool**

- **description?** _(string, optional)_: Description of the tool's purpose.
- **parameters** _(Zod Schema | JSON Schema)_: Schema defining expected tool input.
- **execute?** _(async function)_: Execution function, if available.

#### **ToolExecutionOptions**

- **toolCallId** _(string)_: Tool call ID.
- **messages** _(CoreMessage[])_: Messages sent to generate the tool call.
- **abortSignal** _(AbortSignal, optional)_: Signal to cancel execution.
- **toolChoice?**: `"auto" | "none" | "required" | { "type": "tool", "toolName": string }`

---

### Model Settings and Execution Controls

#### **Generation Settings**

- **maxTokens?** _(number)_: Maximum tokens to generate.
- **temperature?** _(number)_: Controls randomness.
- **topP?** _(number)_: Nucleus sampling.
- **topK?** _(number)_: Limits sampling to top K options.
- **presencePenalty?** _(number)_: Reduces repetition of existing information.
- **frequencyPenalty?** _(number)_: Reduces word/phrase repetition.
- **stopSequences?** _(string[])_: Stops generation when sequences appear.
- **seed?** _(number)_: Seed for deterministic output.
- **maxRetries?** _(number, default: 2)_: Number of retries for execution.
- **abortSignal?** _(AbortSignal)_: Optional signal to cancel calls.

#### **Telemetry Settings**

- **isEnabled?** _(boolean, default: false)_: Enables telemetry.
- **recordInputs?** _(boolean, default: true)_: Records input data.
- **recordOutputs?** _(boolean, default: true)_: Records output data.
- **functionId?** _(string)_: Identifier for grouping telemetry data.
- **metadata?** _(Record<string, string | number | boolean | Array<null | undefined | string | number | boolean>>)_: Additional metadata.

---

### Stream and Response Handling

#### **TextStreamPart**

- **type**: `'text-delta' | 'reasoning' | 'tool-call' | 'tool-result' | 'error' | ...`
- **textDelta?** _(string)_: Text delta for incremental updates.
- **toolCallId?** _(string)_: ID of tool call.
- **toolName?** _(string)_: Name of the tool.
- **result?** _(any)_: Tool execution result.

#### **OnChunkResult**

- **chunk** _(TextStreamPart)_: The chunk of streamed data.

#### **OnErrorResult**

- **error** _(unknown)_: The error encountered.

---

### Final Response

#### **Response**

- **id** _(string)_: Response identifier.
- **model** _(string)_: Model used.
- **timestamp** _(Date)_: Timestamp of the response.
- **headers?** _(Record<string, string>)_: Optional HTTP headers.
- **isContinued** _(boolean)_: Indicates if another step will follow.
- **providerMetadata?** _(Record<string,Record<string,JSONValue>>)_: Provider-specific metadata.

#### **Token Usage**

- **promptTokens** _(number)_: Tokens used in the prompt.
- **completionTokens** _(number)_: Tokens used in generation.
- **totalTokens** _(number)_: Total tokens used.

#### **Completion Token Usage**

- **finishReason** _(`'stop' | 'length' | 'content-filter' | 'tool-calls' | 'error' | 'other' | 'unknown'`)_: Why generation finished.
- **text** _(string)_: Generated text.
- **sources** _(Array<Source>)_: Sources used in the response.

#### **Source**

- **sourceType**: `'url'`
- **id** _(string)_: Source ID.
- **url** _(string)_: Source URL.
- **title?** _(string, optional)_: Source title.
- **providerMetadata?** _(LanguageModelV1ProviderMetadata)_: Metadata about the source.

---

This structured documentation simplifies API usage and improves clarity.
